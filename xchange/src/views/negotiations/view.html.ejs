<div class="container">
    <h1> Negotiation </h1>
    <div id="container-view">
        <a ><img src="<%= assetPath('Logo.jpg') %>" alt="Logo", height="100" /></a>
        <h3><%= userOne.firstName %> <%= userOne.lastName %></h3>
        <h3><%= userTwo.firstName %> <%= userTwo.lastName %></h3>
        <button onclick="window.location.href='<%= editNegotiationPath(negotiation) %>'">Edit</button>
        <form action="<%= deleteNegotiationPath(negotiation) %>" method="POST">
            <input type="hidden" name="_method" value="delete" />
            <input type="submit" value="Delete" />
        </form>
        
    </div>
    


    <div id="list-container">
        <div id ="container-table">
            <h2>Publication of <%= userOne.username %> in Negotiation</h2>
            <% if (! publicationsIn1List.length) { %>
                <p>No results</p>
            <% } else { %>
                <table>
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>Name</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <%  publicationsIn1List.forEach((publication) => { %>
                            <tr>
                                <td><img src="<%= assetPath('Logo.jpg') %>" alt="Logo", height="80" /></td>
                                <td><%= publication.name %></td>
                                <td>
                                    <form action="<%= deletePublicationPath(publication) %>" method="POST">
                                        <input type="hidden" name="_method" value="delete" />
                                        <input type="submit" value="Delete" />
                                    </form>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            <% } %>
        </div>

        <div id ="container-table">
            <h2>Publication of <%= userTwo.username %> in Negotiation</h2>
            <% if (!publicationsIn2List.length) { %>
                <p>No results</p>
            <% } else { %>
                <table>
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>Name</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% publicationsIn2List.forEach((publication) => { %>
                            <tr>
                                <td><img src="<%= assetPath('Logo.jpg') %>" alt="Logo", height="80" /></td>
                                <td><%= publication.name %></td>
                                <td>
                                    <form action="<%= deletePublicationPath(publication) %>" method="POST">
                                        <input type="hidden" name="_method" value="delete" />
                                        <input type="submit" value="Delete" />
                                    </form>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            <% } %>
        </div>
    </div>


    <div id="list-container">
        <div id ="container-table">
            <h2><%= userOne.username %> Publications</h2>
            <% if (!notpublications1List.length) { %>
                <p>No results</p>
            <% } else { %>
                <table>
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>Name</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% notpublications1List.forEach((publication) => { %>
                            <tr>
                                <td><img src="<%= assetPath('Logo.jpg') %>" alt="Logo", height="80" /></td>
                                <td><%= publication.name %></td>
                                <td>
                                    <button onclick="window.location.href='<%= addPublicationPath(publication) %>'">Add</button>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            <% } %>
        </div>
        <div id ="container-table">
            <h2><%= userTwo.username %> Publications</h2>
            <% if (!notpublications2List.length) { %>
                <p>No results</p>
            <% } else { %>
                <table>
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>Name</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% notpublications2List.forEach((publication) => { %>
                            <tr>
                                <td><img src="<%= assetPath('Logo.jpg') %>" alt="Logo", height="80" /></td>
                                <td><%= publication.name %></td>
                                <td>
                                    <button onclick="window.location.href='<%= addPublicationPath(publication) %>'">Add</button>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            <% } %>
        </div>
    </div>

    <h2>Messages</h2>
    <% if (!messagesList.length) { %>
        <p>No results</p>
    <% } else { %>
        <table>
            <thead>
                <tr>
                    <th>Content</th>
                    <th>Date</th>
                    <th colspan= "2"> Actions</th>
                </tr>
            </thead>
            <tbody>
                <% messagesList.forEach((message) => { %>
                    <tr>
                        <td><%= message.content %></td>
                        <td><%= message.updatedAt.toISOString().split('T')[0] %></td>
                        <td><button onclick="window.location.href='<%= editMessagePath(message) %>'">Edit</button></td>
                        <td>
                            <form action="<%= deleteMessagePath(message) %>" method="POST">
                                <input type="hidden" name="_method" value="delete" />
                                <input type="submit" value="Delete" />
                            </form>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    <% } %>

    <%- include('../messages/_form') %>

</div>
